var $sortableTable=new Class({options:{onClick:!1,sortOn:0,sortBy:"ASC"},initialize:function(e,t,n){this.setOptions(n),this.tHead=$(e),this.tBody=$(t),this.elements=this.tBody.getElements("tr"),this.elements.each(function(e,t){this.options.onClick&&e.addEvent("click",n.onClick)},this),this.tHead.getElements("td").each(function(e,t){e.axis&&(e.getElement("a").addEvent("click",this.sort.bind(this,t)),e.findData=function(t){var n=t.getFirst();return n?e.findData(n):t.innerHTML.trim()},e.compare=function(n,r){var1=e.findData(n.getChildren()[t]),var2=e.findData(r.getChildren()[t]);if(e.axis=="number")return var1=parseFloat(var1),var2=parseFloat(var2),e.sortBy=="ASC"?var1-var2:var2-var1;if(e.axis=="string"){var1=var1.toUpperCase(),var2=var2.toUpperCase();if(var1==var2)return 0;if(e.sortBy=="ASC"){if(var1<var2)return-1}else if(var1>var2)return-1;return 1}},t==this.options.sortOn&&e.fireEvent("click"))},this)},sort:function(e){this.options.onStart&&this.fireEvent("onStart"),this.options.sortOn=e;var t=this.tHead.getElements("td"),n=t[e];n.retrieve("flag")==1?(n.store("flag",!1),n.sortBy="DESC"):n.retrieve("flag")==0?(n.store("flag",!0),n.sortBy="ASC"):this.options.sortBy=="ASC"?(n.store("flag",!0),n.sortBy="ASC"):this.options.sortBy=="DESC"&&(n.store("flag",!1),n.sortBy="DESC"),this.elements.sort(n.compare),this.elements.injectInside(this.tBody),this.options.onComplete&&this.fireEvent("onComplete")}});$sortableTable.implement(new Events),$sortableTable.implement(new Options)